<app-navbar></app-navbar>
<app-chatbot></app-chatbot>
<div class="user-details-container">
    <h2>My Details</h2><!-- <h2>{{ userName }}'s Details</h2> -->
    <div *ngIf="showToast" class="toast">
      <div class="toast-content">
        <span class="toast-icon">âœ…</span>
        <p>User details updated successfully!</p>
        <button class="close-btn" (click)="showToast = false">&times;</button>
      </div>
      <div class="toast-progress"></div>
    </div>
    
    
    <div class="detail-item">
      <label>Name:</label>
      <span *ngIf="!editMode">{{ user.name }}</span>
      <input *ngIf="editMode" [(ngModel)]="user.name" />
    </div>
    <div class="detail-item">
      <label>Email:</label>
      <span *ngIf="!editMode">{{ user.email }}</span>
      <input *ngIf="editMode" [(ngModel)]="user.email" />
    </div>
    <div class="detail-item">
        <label>Status:</label>
        <span *ngIf="!editMode">{{ user.role }}</span>
        <select *ngIf="editMode && isAdmin" [(ngModel)]="user.role"> <!--If user is Admin-->
            <option value="admin">Admin</option>
            <option value="user">User</option>
            <option value="Inactive">Deactivate</option>
        </select>
        <span *ngIf="editMode && !isAdmin" class="unauthorized">Unauthorized to edit role</span> <!--If user is not Admin-->
      </div>
    <div class="detail-item">
      <label>Phone:</label>
      <span *ngIf="!editMode">{{ user.phone }}</span>
      <input *ngIf="editMode" [(ngModel)]="user.phone" />
    </div>
    <div class="detail-item">
      <label>Address:</label>
      <span *ngIf="!editMode">{{ user.address }}</span>
      <textarea *ngIf="editMode" [(ngModel)]="user.address"></textarea>
    </div>
    <div class="detail-item">
      <label>Province:</label>
      <span *ngIf="!editMode">{{ user.province }}</span>
      <select *ngIf="editMode" [(ngModel)]="user.province">
        <option value="Gauteng">Gauteng</option>
        <option value="KwaZulu-Natal">KwaZulu-Natal</option>
        <option value="Mpumalanga">Mpumalanga</option>
        <option value="Limpopo">Limpopo</option>
        <option value="Durban">Durban</option>
        <option value="Western Cape">Western Cape</option>
        <option value="Northern Cape">Northern Cape</option>
        <option value="Eastern Cape">Eastern Cape</option>
        <option value="North West">North West</option>
      </select>
    </div>
    <div class="detail-item">
        <label>Gender:</label>
        <span *ngIf="!editMode">{{ user.gender }}</span>
        <select *ngIf="editMode" [(ngModel)]="user.gender">
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </div>
    <div class="detail-item">
        <label>Date of Birth:</label>
        <span *ngIf="!editMode">{{ user.dob | date }}</span>
        <input *ngIf="editMode" type="date" [(ngModel)]="user.dob" />
      </div>
    <div class="button-group">
      <button (click)="toggleEditMode()" *ngIf="!editMode">Edit</button>
      <button (click)="saveDetails()" *ngIf="editMode">Save</button>
      <button (click)="toggleEditMode()" *ngIf="editMode">Cancel</button>
    </div>
  </div>
  
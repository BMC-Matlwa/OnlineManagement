<app-navbar></app-navbar> 
<h2>Orders</h2>
<table>
    <thead>
        <tr>
          <th>Product Name</th>
          <th>Quantity</th>
          <th>Status</th>
          <th>Order Date</th>
          <th>Actions</th>
        </tr>
      </thead>
    <tr *ngFor="let order of orders">
      <td>{{ order.product_name }}</td>
      <td>{{ order.quantity }}</td>
      <td>{{ order.status }}</td>
      <td>{{ order.order_date }}</td>
      <td>
        <button *ngIf="order.status === 'Processing'" (click)="approveOrder(order)" style="background-color: #4CAF50; color: white;">Approve</button>&nbsp;&nbsp;
        <button *ngIf="order.status === 'Processing'" (click)="declineOrder(order)" style="background-color: red; color: white;">Decline</button>
      </td>
    </tr>
  </table>
  <br><br>

<h2>VIEW AND ADD PRODUCTS</h2>
<!-- Table to display fetched data -->
<table border="1">
  <thead>
    <tr>
      <th>ID</th>
      <th>Product Name</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Description</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of data">
      <td>{{ item.id }}</td>
      <td>{{ item.name }}</td>
      <td>{{ item.stock }}</td>
      <td>{{ item.price }}</td>
      <td>{{ item.description }}</td>
      <td>
        
        <!-- <div *ngIf="userRole === 'user'">
        <button (click)="purchaseItem(item)" style="background-color: orange; color: white;">Purchase</button>
        </div> -->
        <button (click)="editData(item)" style="background-color: orange; color: white;">Edit</button>&nbsp;&nbsp;
        <button (click)="deleteData(item.id)" style="background-color: red; color: white;">Delete</button>
      </td>
    </tr>
  </tbody>
</table>
<br><br>
<!-- Add/Edit Order Form -->
<div *ngIf="editingItem">
  <h3>Edit Order</h3>
  <form (ngSubmit)="updateData()">
    <label for="name">Product Name:</label>
    <input [(ngModel)]="editingItem.name" name="name" required />

    <label for="stock">Quantity:</label>
    <input [(ngModel)]="editingItem.stock" name="stock" type="number" required />

    <label for="price">Price:</label>
    <input [(ngModel)]="editingItem.price" name="price" type="number" required />
    
    <button  type="submit" style="background-color: orange; color: white;">Update Order</button>
  </form>
</div>

<!-- Add New Order Form -->
<h3>Add New Order</h3>
<form (ngSubmit)="addProductData()">
  <label for="name">Product Name:</label>
  <input [(ngModel)]="newItem.name" name="name" required />

  <label for="stock">Quantity:</label>
  <input [(ngModel)]="newItem.stock" name="stock" type="number" required />

  <label for="price">Price:</label>
  <input [(ngModel)]="newItem.price" name="price" type="number" required />

  <label for="description">Description:</label>
  <input [(ngModel)]="newItem.description" name="description" required />  

  <button type="submit" style="background-color: #4CAF50; color: white;">Add Order</button>
</form>
